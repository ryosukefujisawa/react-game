{"ast":null,"code":"import{useEffect,useState}from'react';import StartMenu from\"./StartMenu\";import TwoZeroFourEight from'./2048/TwoZeroFourEight';import SnakeGame from'./SnakeGame/SnakeGame';import Name from'./Name';import axios from'axios';import'./css/Game.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Game=()=>{const[game,setGame]=useState(\"name\");const[scores,setScores]=useState([]);const[userName,setUserName]=useState('名無し');const[userScore,setUserScore]=useState(Number);useEffect(()=>{/* 非同期関数 */const fetchScores=async()=>{try{/* サーバーにHTTP GETリクエストを送信してスコアのリストを取得 */const response=await axios.get('http://localhost:3001/scores');setScores(response.data);console.log(scores);}catch(err){console.error(\"Error fetching scores:\",err);}};fetchScores();},[]);const handleDeleteScore=async()=>{try{await axios.delete('http://localhost:3001/scores');const response=await axios.get('http://localhost:3001/scores');setScores(response.data);}catch(err){console.log(\"Error submitting score:\",err);}};const selectGame=game=>{// console.log(game);\nswitch(game){case\"snake\":return/*#__PURE__*/_jsx(SnakeGame,{setGame:setGame,setScores:setScores,setUserScore:setUserScore,userScore:userScore,userName:userName});case\"2048\":return/*#__PURE__*/_jsx(TwoZeroFourEight,{setGame:setGame});case\"name\":return/*#__PURE__*/_jsx(Name,{userName:userName,setUserName:setUserName,setGame:setGame});case\"menu\":return/*#__PURE__*/_jsx(StartMenu,{setGame:setGame});default:return/*#__PURE__*/_jsx(StartMenu,{setGame:setGame});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:()=>{setGame(\"menu\");setUserScore(0);},children:\"\\u30B2\\u30FC\\u30E0\\u96C6\"})})})}),/*#__PURE__*/_jsx(\"main\",{children:selectGame(game)}),/*#__PURE__*/_jsxs(\"footer\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"High Scores\"}),/*#__PURE__*/_jsx(\"div\",{id:\"rank\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"ranking\",children:scores.length>0?scores.map((score,index)=>/*#__PURE__*/_jsxs(\"li\",{className:index<3?\"top\".concat(index+1):'',children:[/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:score.name===\"\"?\"名無し\":score.name}),\" :\",/*#__PURE__*/_jsxs(\"span\",{className:\"score\",children:[score.score,\"\\u70B9\"]})]},score.id)):/*#__PURE__*/_jsx(\"li\",{className:\"empty\",children:\"\\u8A18\\u9332\\u7121\\u3057\"})})})]})]});};export default Game;","map":{"version":3,"names":["useEffect","useState","StartMenu","TwoZeroFourEight","SnakeGame","Name","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Game","game","setGame","scores","setScores","userName","setUserName","userScore","setUserScore","Number","fetchScores","response","get","data","console","log","err","error","handleDeleteScore","delete","selectGame","children","className","onClick","id","length","map","score","index","concat","name"],"sources":["C:/Users/藤澤 良祐/Downloads/研修/react-game/game/src/components/Game.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport StartMenu from \"./StartMenu\";\r\nimport TwoZeroFourEight from './2048/TwoZeroFourEight';\r\nimport SnakeGame from './SnakeGame/SnakeGame';\r\nimport Name from './Name';\r\nimport axios from 'axios';\r\nimport { response } from 'express';\r\n\r\nimport { Score } from './SnakeGame/utils/utils';\r\n\r\nimport './css/Game.css';\r\n\r\n\r\nconst Game = () => {\r\n    const [game, setGame] = useState<string>(\"name\");\r\n    const [scores, setScores] = useState<Score[]>([]);\r\n    const [userName, setUserName] = useState<string>('名無し');\r\n    const [userScore, setUserScore] = useState<number>(Number);\r\n\r\n\r\n  useEffect(() => {\r\n    /* 非同期関数 */\r\n    const fetchScores = async () => {\r\n      try {\r\n        /* サーバーにHTTP GETリクエストを送信してスコアのリストを取得 */\r\n        const response = await axios.get<Score[]>('http://localhost:3001/scores');\r\n        setScores(response.data);\r\n        console.log(scores);\r\n      }\r\n      catch (err) {\r\n        console.error(\"Error fetching scores:\", err);\r\n      }\r\n    };\r\n    fetchScores();\r\n  }, []);\r\n\r\n  const handleDeleteScore = async () => {\r\n    try {\r\n      await axios.delete('http://localhost:3001/scores');\r\n    \r\n      const response = await axios.get<Score[]>('http://localhost:3001/scores');\r\n      setScores(response.data);\r\n    }\r\n    catch (err) {\r\n      console.log(\"Error submitting score:\", err);\r\n    }\r\n  };\r\n\r\n  \r\n    const selectGame = (game: string) => {\r\n        // console.log(game);\r\n        switch(game) {\r\n            case \"snake\":\r\n                return  <SnakeGame \r\n                            setGame={setGame} \r\n                            setScores={setScores}\r\n                            setUserScore={setUserScore} \r\n                            userScore={userScore}\r\n                            userName={userName}\r\n                        />;\r\n\r\n            case \"2048\":\r\n                return  <TwoZeroFourEight setGame={setGame} />\r\n\r\n            case \"name\":\r\n                return  <Name \r\n                          userName={userName} \r\n                          setUserName={setUserName} \r\n                          setGame={setGame} \r\n                        />\r\n            case \"menu\":\r\n                return  <StartMenu setGame={setGame} />;\r\n\r\n            default:\r\n                return  <StartMenu setGame={setGame} />;\r\n\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>  \r\n            <header>\r\n              <div className=\"title\">\r\n                  <h1><a onClick={() => {setGame(\"menu\"); setUserScore(0); }} >ゲーム集</a></h1>\r\n              </div>\r\n            </header>\r\n            <main>\r\n                {selectGame(game)}  \r\n            </main>\r\n            <footer>\r\n                {/* <button onClick={() => {setGame(\"name\"); setUserScore(0);}}>名前変更</button> */}\r\n                <h2>High Scores</h2>\r\n                <div id=\"rank\">\r\n                    <ul className='ranking'>\r\n                        { scores.length > 0 ? scores.map((score, index) => (\r\n                            <li key={score.id} className={index < 3 ? `top${index + 1}` : ''}>\r\n                                <span className=\"name\">{score.name === \"\" ? \"名無し\" : score.name}</span> :\r\n                                <span className=\"score\">{score.score}点</span>\r\n                            </li>\r\n                        )) :\r\n                        <li className=\"empty\">記録無し</li>}\r\n                    </ul>\r\n                    {/* <button onClick={handleDeleteScore}>ランキング削除</button> */}\r\n                </div>\r\n            </footer>\r\n        </>\r\n    );\r\n\r\n};\r\n\r\nexport default Game;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}